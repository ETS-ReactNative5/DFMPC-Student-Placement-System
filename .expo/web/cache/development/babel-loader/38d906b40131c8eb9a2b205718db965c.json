{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useState, useEffect, useContext } from \"react\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport TouchableHighlight from \"react-native-web/dist/exports/TouchableHighlight\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport { useNavigation } from \"@react-navigation/core\";\nimport { Calendar, CalendarList, Agenda } from \"react-native-calendars\";\nimport studentData from \"../dfmpc-student-placement-system.json\";\nimport AppContext from \"../AppContext\";\nimport \"../global.js\";\nimport { NavigationContainer } from \"@react-navigation/native\";\nimport firestore from \"@react-native-firebase/firestore\";\nimport { auth, firebase } from \"../firebase\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nvar buttonHeight = 50;\nvar textPos = buttonHeight / 2;\nvar SPACING = 20;\nvar AVATAR_SIZE = 70;\nvar ICON_SIZE = 80;\nvar days = \"\";\nvar specialty = \"\";\nvar RANGE = 12;\nvar initialDate = \"2022-01-02\";\n\nvar getScheduleListRealtime = function getScheduleListRealtime() {\n  var schedulesArray = [];\n  firebase.database().ref(\"/schedules\").once(\"value\", function (snapshot) {\n    var key = snapshot.forEach(function (data) {\n      if (snapshot.child(data.key + \"/student_id\").val() === authUserID) {\n        console.log(\"Matching schedule item found for UserID:\", authUserID);\n        schedulesArray.push(snapshot.child(data.key));\n      }\n    });\n  });\n  console.log(\"Matching Schedules List:\", schedulesArray);\n  return schedulesArray;\n};\n\nvar CalendarView = function CalendarView() {\n  var navigation = useNavigation();\n  var myContext = useContext(AppContext);\n\n  var _useState = useState(initialDate),\n      _useState2 = _slicedToArray(_useState, 2),\n      selectedDate = _useState2[0],\n      setSelectedDate = _useState2[1];\n\n  var _useState3 = useState(\"\"),\n      _useState4 = _slicedToArray(_useState3, 2),\n      name = _useState4[0],\n      SetName = _useState4[1];\n\n  var scheduleList = getScheduleListRealtime();\n  console.log(\"User's Schedule List:\", studentData.schedules);\n  console.log(\"Get Firestore Schedule List:\", getScheduleListRealtime());\n\n  var onDayPress = function onDayPress(day) {\n    setSelectedDate(day.dateString);\n  };\n\n  return _jsx(CalendarList, {\n    current: initialDate,\n    pastScrollRange: 3,\n    futureScrollRange: RANGE,\n    theme: theme,\n    onDayPress: function onDayPress(day) {\n      console.log(\"Day\", day, \"selected\");\n      days = day.dateString;\n      console.log(\"Days =\", days);\n      navigation.navigate(\"DayAgenda\");\n    },\n    markingType: \"period\",\n    markedDates: generateSchedule(scheduleList)\n  });\n};\n\nvar generateSchedule = function generateSchedule(scheduleList) {\n  var schedulesObj = {};\n  scheduleList.forEach(function (schedule) {\n    var scheduleObj = {};\n    var week = getDateFromWeekNum(schedule.week_no, 2022, schedule.specialty_duration);\n    var daysInWeek = getDaysInWeek(week.startDate, schedule.specialty_duration, schedule.specialty_id);\n\n    if (schedule.student_id != parseInt(authUserID, 10) + 1) {\n      return {};\n    }\n\n    var startcolor = \"rgba(80,206,187,0.5)\";\n    var middlecolor = startcolor;\n    var endcolor = middlecolor;\n\n    if (schedule.specialty_id == 1) {\n      startcolor = \"rgba(226,135,67,0.5)\";\n    } else if (schedule.specialty_id == 2) {\n      startcolor = \"rgba(8,181,245,0.5)\";\n    } else if (schedule.specialty_id == 3) {\n      startcolor = \"rgba(245,158,45,0.5)\";\n    } else if (schedule.specialty_id == 4) {\n      startcolor = \"rgba(25,8,245,0.5)\";\n    } else if (schedule.specialty_id == 5) {\n      startcolor = \"rgba(180,58,230,0.5)\";\n    } else if (schedule.specialty_id == 6) {\n      startcolor = \"rgba(245,58,24,0.5)\";\n    } else {\n      startcolor = \"rgba(80,206,187,0.5)\";\n    }\n\n    middlecolor = startcolor;\n    endcolor = middlecolor;\n    daysInWeek.forEach(function (day, dayIndex) {\n      scheduleObj = {};\n\n      if (dayIndex === 0) {\n        scheduleObj.startingDate = true;\n        scheduleObj.color = startcolor;\n        scheduleObj.textColor = \"white\";\n      } else if (dayIndex > 0 && dayIndex <= 5) {\n        scheduleObj.color = middlecolor;\n        scheduleObj.textColor = \"white\";\n      } else {\n        scheduleObj.endingDay = true;\n        scheduleObj.color = endcolor;\n        scheduleObj.textColor = \"white\";\n      }\n\n      schedulesObj[day] = scheduleObj;\n    });\n  });\n  return schedulesObj;\n};\n\nvar getDaysInWeek = function getDaysInWeek(startDate, specialtyduration, specialty_id) {\n  var dates = [];\n  console.log(\"Start Date:\", startDate);\n  console.log(\"SpecialityID:\", specialty_id);\n\n  for (var i = 0; i < specialtyduration; i++) {\n    var currentDate = new Date(startDate);\n    currentDate.setDate(startDate.getDate() + i);\n    var formattedDate = currentDate.toISOString().split(\"T\")[0];\n    dates.push(formattedDate);\n  }\n\n  console.log(\"DatesList\", dates);\n  return dates;\n};\n\nvar getDateFromWeekNum = function getDateFromWeekNum(weekNum, year, specialtyduration) {\n  var daynum = weekNum * 7;\n\n  if (weekNum * 7 > 30) {\n    var month = weekNum * 7 / 30 + 1;\n  } else {\n    var month = 0;\n  }\n\n  while (daynum > 30) {\n    daynum = daynum - 30;\n  }\n\n  month = parseInt(month);\n  var d = new Date(year, month, 1);\n  console.log(d);\n  var endDate = new Date(d.setDate(daynum));\n  var startDate = new Date(year, month, 2);\n  startDate.setDate(endDate.getDate() - specialtyduration);\n  console.log(\"Start Date:\", startDate, \", End Date:\", endDate);\n  return {\n    startDate: startDate,\n    endDate: endDate\n  };\n};\n\nvar theme = {\n  \"stylesheet.calendar.header\": {\n    dayHeader: {\n      fontWeight: \"600\",\n      color: \"#48BFE3\"\n    }\n  },\n  \"stylesheet.day.basic\": {\n    today: {\n      borderColor: \"#48BFE3\",\n      borderWidth: 0.8\n    },\n    todayText: {\n      color: \"#5390D9\",\n      fontWeight: \"800\"\n    }\n  }\n};\nvar styles = StyleSheet.create({\n  container: {\n    marginTop: 20,\n    backgroundColor: \"white\",\n    marginTop: 10,\n    borderRadius: 20,\n    flex: 1,\n    borderColor: \"rgba(36,50,61,1)\",\n    borderWidth: 5\n  }\n});\nexport default CalendarView;\nexport { days };","map":{"version":3,"names":["React","useState","useEffect","useContext","useNavigation","Calendar","CalendarList","Agenda","studentData","AppContext","NavigationContainer","firestore","auth","firebase","buttonHeight","textPos","SPACING","AVATAR_SIZE","ICON_SIZE","days","specialty","RANGE","initialDate","getScheduleListRealtime","schedulesArray","database","ref","once","snapshot","key","forEach","data","child","val","authUserID","console","log","push","CalendarView","navigation","myContext","selectedDate","setSelectedDate","name","SetName","scheduleList","schedules","onDayPress","day","dateString","theme","navigate","generateSchedule","schedulesObj","schedule","scheduleObj","week","getDateFromWeekNum","week_no","specialty_duration","daysInWeek","getDaysInWeek","startDate","specialty_id","student_id","parseInt","startcolor","middlecolor","endcolor","dayIndex","startingDate","color","textColor","endingDay","specialtyduration","dates","i","currentDate","Date","setDate","getDate","formattedDate","toISOString","split","weekNum","year","daynum","month","d","endDate","dayHeader","fontWeight","today","borderColor","borderWidth","todayText","styles","StyleSheet","create","container","marginTop","backgroundColor","borderRadius","flex"],"sources":["C:/DFMPC/DFMPC-Student-Placement-System/Screens/CalendarView.js"],"sourcesContent":["import React, { useState, useEffect, useContext } from \"react\";\r\nimport {\r\n  StyleSheet,\r\n  Text,\r\n  View,\r\n  TouchableHighlight,\r\n  Image,\r\n  FlatList,\r\n} from \"react-native\";\r\nimport { useNavigation } from \"@react-navigation/core\";\r\nimport { Calendar, CalendarList, Agenda } from \"react-native-calendars\";\r\nimport studentData from \"../dfmpc-student-placement-system.json\";\r\nimport AppContext from \"../AppContext\";\r\nimport \"../global.js\";\r\nimport { NavigationContainer } from \"@react-navigation/native\";\r\nimport firestore from \"@react-native-firebase/firestore\";\r\nimport { auth, firebase } from \"../firebase\";\r\n\r\n//constants\r\nconst buttonHeight = 50;\r\nconst textPos = buttonHeight / 2;\r\nconst SPACING = 20;\r\nconst AVATAR_SIZE = 70;\r\nconst ICON_SIZE = 80;\r\nvar days = \"\";\r\nvar specialty = \"\";\r\nconst RANGE = 12;\r\nconst initialDate = \"2022-01-02\";\r\n\r\n// Uses realtime, use username to go into schedules table and copy only the objects with the same student_id as authUserId\r\nconst getScheduleListRealtime = () => {\r\n  const schedulesArray = [];\r\n  firebase\r\n    .database()\r\n    .ref(\"/schedules\")\r\n    .once(\"value\", (snapshot) => {\r\n      //traverse each schedule in schedules\r\n      const key = snapshot.forEach(function (data) {\r\n        // Check if it student_id matches authUserID\r\n        // If so, push it onto the schedulesArray\r\n        if (snapshot.child(data.key + \"/student_id\").val() === authUserID) {\r\n          console.log(\"Matching schedule item found for UserID:\", authUserID);\r\n          schedulesArray.push(snapshot.child(data.key));\r\n        }\r\n      });\r\n    });\r\n  console.log(\"Matching Schedules List:\", schedulesArray);\r\n  //TODO: Debug, this should return the exact same data type as studentData.schedules\r\n  return schedulesArray;\r\n};\r\n\r\nconst CalendarView = () => {\r\n  //use navigation\r\n  const navigation = useNavigation();\r\n  const myContext = useContext(AppContext);\r\n  // const [selectedDateId, setSelectedDateId] = useState(null);\r\n  // State pattern to represent the currently selected date.\r\n  const [selectedDate, setSelectedDate] = useState(initialDate);\r\n  // State pattern used to represent the authorized user's Name\r\n  const [name, SetName] = useState(\"\");\r\n  // const navigation = useNavigation()\r\n\r\n  //retrieve user details\\\r\n  // const scheduleList = getScheduleListRealtime();\r\n  const scheduleList = getScheduleListRealtime();\r\n  console.log(\"User's Schedule List:\", studentData.schedules);\r\n  console.log(\"Get Firestore Schedule List:\", getScheduleListRealtime());\r\n  const onDayPress = (day) => {\r\n    // Set's selectedDate state to the selected date\r\n    setSelectedDate(day.dateString);\r\n  };\r\n\r\n  return (\r\n    //render calendar\r\n    <CalendarList\r\n      // testID={testIDs.calendarList.CONTAINER}\r\n      current={initialDate}\r\n      pastScrollRange={3}\r\n      futureScrollRange={RANGE}\r\n      // renderHeader={renderCustomHeader}\r\n      theme={theme}\r\n      // Sets onPress to navigate to that agenda and set selected date.\r\n      onDayPress={(day) => {\r\n        console.log(\"Day\", day, \"selected\");\r\n        days = day.dateString;\r\n        console.log(\"Days =\", days);\r\n\r\n        navigation.navigate(\"DayAgenda\");\r\n      }}\r\n      // markedDates={markedDates}\r\n      markingType=\"period\"\r\n      //get marked dates using generateschedule and user credentials\r\n      markedDates={generateSchedule(scheduleList)}\r\n    />\r\n  );\r\n};\r\n\r\n// generate marked dates\r\nconst generateSchedule = (scheduleList) => {\r\n  let schedulesObj = {};\r\n  scheduleList.forEach((schedule) => {\r\n    let scheduleObj = {};\r\n\r\n    //get the week for the schedule\r\n    const week = getDateFromWeekNum(\r\n      schedule.week_no,\r\n      2022,\r\n      schedule.specialty_duration\r\n    );\r\n\r\n    //figure out which days of the week in the schedule\r\n    const daysInWeek = getDaysInWeek(\r\n      week.startDate,\r\n      schedule.specialty_duration,\r\n      schedule.specialty_id\r\n    );\r\n\r\n    //only show schedule for correct user\r\n    if (schedule.student_id != parseInt(authUserID, 10) + 1) {\r\n      return {};\r\n    }\r\n\r\n    //default colours\r\n    var startcolor = \"rgba(80,206,187,0.5)\";\r\n    var middlecolor = startcolor;\r\n    var endcolor = middlecolor;\r\n\r\n    //change colour based on specialty\r\n    if (schedule.specialty_id == 1) {\r\n      startcolor = \"rgba(226,135,67,0.5)\";\r\n    } else if (schedule.specialty_id == 2) {\r\n      startcolor = \"rgba(8,181,245,0.5)\";\r\n    } else if (schedule.specialty_id == 3) {\r\n      startcolor = \"rgba(245,158,45,0.5)\";\r\n    } else if (schedule.specialty_id == 4) {\r\n      startcolor = \"rgba(25,8,245,0.5)\";\r\n    } else if (schedule.specialty_id == 5) {\r\n      startcolor = \"rgba(180,58,230,0.5)\";\r\n    } else if (schedule.specialty_id == 6) {\r\n      startcolor = \"rgba(245,58,24,0.5)\";\r\n    } else {\r\n      startcolor = \"rgba(80,206,187,0.5)\";\r\n    }\r\n    middlecolor = startcolor;\r\n    endcolor = middlecolor;\r\n    // Iterates through each schedule object in a week\r\n    daysInWeek.forEach((day, dayIndex) => {\r\n      // Stores appropriate schedule item as scheduleObj\r\n      scheduleObj = {};\r\n      if (dayIndex === 0) {\r\n        scheduleObj.startingDate = true;\r\n        scheduleObj.color = startcolor;\r\n        scheduleObj.textColor = \"white\";\r\n      } else if (dayIndex > 0 && dayIndex <= 5) {\r\n        scheduleObj.color = middlecolor;\r\n        scheduleObj.textColor = \"white\";\r\n      } else {\r\n        scheduleObj.endingDay = true;\r\n        scheduleObj.color = endcolor;\r\n        scheduleObj.textColor = \"white\";\r\n      }\r\n\r\n      // Object.assign(schedulesObj, scheduleObj);\r\n      // Assigns the day's\r\n      schedulesObj[day] = scheduleObj;\r\n    }); // end of days i week\r\n  }); // End of Schedule List\r\n\r\n  return schedulesObj;\r\n};\r\n\r\n// get days that the specialty will run over using specialty duration\r\n\r\nconst getDaysInWeek = (startDate, specialtyduration, specialty_id) => {\r\n  let dates = [];\r\n  // console.log('startDate', startDate)\r\n  console.log(\"Start Date:\", startDate);\r\n  console.log(\"SpecialityID:\", specialty_id);\r\n  for (let i = 0; i < specialtyduration; i++) {\r\n    //takes current date and counts days prior to it for listing on calendar\r\n    const currentDate = new Date(startDate);\r\n    currentDate.setDate(startDate.getDate() + i);\r\n    const formattedDate = currentDate.toISOString().split(\"T\")[0];\r\n\r\n    dates.push(formattedDate);\r\n  }\r\n  console.log(\"DatesList\", dates);\r\n  return dates;\r\n};\r\n\r\n// calculates correct week based on the weeknumber and specialty duration\r\nconst getDateFromWeekNum = (weekNum, year, specialtyduration) => {\r\n  var daynum = weekNum * 7;\r\n  if (weekNum * 7 > 30) {\r\n    var month = (weekNum * 7) / 30 + 1;\r\n  } else {\r\n    var month = 0;\r\n  }\r\n  while (daynum > 30) {\r\n    daynum = daynum - 30;\r\n  }\r\n  month = parseInt(month);\r\n  var d = new Date(year, month, 1);\r\n  console.log(d);\r\n  const endDate = new Date(d.setDate(daynum));\r\n  const startDate = new Date(year, month, 2);\r\n  startDate.setDate(endDate.getDate() - specialtyduration);\r\n  console.log(\"Start Date:\", startDate, \", End Date:\", endDate);\r\n  return { startDate: startDate, endDate: endDate };\r\n};\r\n\r\nconst theme = {\r\n  \"stylesheet.calendar.header\": {\r\n    dayHeader: {\r\n      fontWeight: \"600\",\r\n      color: \"#48BFE3\",\r\n    },\r\n  },\r\n  \"stylesheet.day.basic\": {\r\n    today: {\r\n      borderColor: \"#48BFE3\",\r\n      borderWidth: 0.8,\r\n    },\r\n    todayText: {\r\n      color: \"#5390D9\",\r\n      fontWeight: \"800\",\r\n    },\r\n  },\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    marginTop: 20,\r\n    backgroundColor: \"white\",\r\n    marginTop: 10,\r\n    borderRadius: 20,\r\n    flex: 1,\r\n    borderColor: \"rgba(36,50,61,1)\",\r\n    borderWidth: 5,\r\n  },\r\n});\r\nexport default CalendarView;\r\n// The function only works for one of each specialty 1, 5*, 1*, 1, 2, 2, 2*\r\nexport { days };\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}